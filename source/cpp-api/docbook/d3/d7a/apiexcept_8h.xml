<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="d3/d7a/apiexcept_8h">
    <title>apiexcept.h File Reference</title>
    <programlisting>#include &lt;tango/server/except.h&gt;</programlisting>
    <programlisting>#include &lt;vector&gt;</programlisting>
        <simplesect>
            <title> Classes </title>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>struct <link linkend="dc/d08/classTango_1_1NamedDevFailed">Tango::NamedDevFailed</link></para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>struct <link linkend="d8/d55/classTango_1_1NamedDevFailedList">Tango::NamedDevFailedList</link></para>
                    </listitem>
                </itemizedlist>
            </para>
        </simplesect>
        <simplesect>
            <title> Namespaces </title>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>struct <link linkend="de/ddf/namespaceTango">Tango</link></para>
                    </listitem>
                </itemizedlist>
            </para>
        </simplesect>
        <simplesect>
            <title>Defines</title>
            <para>
                <itemizedlist>
                    <listitem>
                            <para>#define <link linkend="d3/d7a/apiexcept_8h_1afd452ad0dbb5bb9da19c6229068b0aac">MAKE_EXCEPT</link></para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <itemizedlist>
                    <listitem>
                            <para>#define <link linkend="d3/d7a/apiexcept_8h_1ac86ab2caba67e3455c7f2f74ab9c3dcc">TRANSIENT_NOT_EXIST_EXCEPT</link> if (E.minor() == omni::TRANSIENT_CallTimedout) \
	{ \
\
		bool need_reconnect = false; \
		omniORB::setClientConnectTimeout(NARROW_CLNT_TIMEOUT); \
		try \
		{ \
			Device_var dev = Device::_duplicate(OBJ-&gt;device); \
			dev-&gt;ping(); \
		} \
		catch(CORBA::TRANSIENT &amp;trans_ping) \
		{ \
			if (trans_ping.minor() == omni::TRANSIENT_ConnectFailed || \
				trans_ping.minor() == omni::TRANSIENT_CallTimedout  || \
                (OBJ-&gt;ext-&gt;has_alt_adr == true &amp;&amp; trans_ping.minor() == omni::TRANSIENT_CallTimedout)) \
			{ \
				need_reconnect = true; \
			} \
		} \
		catch(...) {} \
		omniORB::setClientConnectTimeout(0); \
\
		if (need_reconnect == false) \
		{ \
			TangoSys_OMemStream desc; \
			desc &lt;&lt; &quot;Timeout (&quot; &lt;&lt; OBJ-&gt;timeout &lt;&lt; &quot; mS) exceeded on device &quot; &lt;&lt; OBJ-&gt;dev_name(); \
			desc &lt;&lt; ends; \
			TangoSys_OMemStream ori; \
			ori &lt;&lt; CLASS &lt;&lt; &quot;:&quot; &lt;&lt; NAME &lt;&lt; ends; \
			ApiCommExcept::re_throw_exception(E, \
						  (const char *)&quot;API_DeviceTimedOut&quot;, \
						  desc.str(), ori.str());\
		}\
	} \
\
	OBJ-&gt;set_connection_state(<link linkend="d9/ddc/devapi_8h_1ad5fa52feb9025532cea9d330e28d51aa">CONNECTION_NOTOK</link>); \
	ctr++; \
\
	if ((OBJ-&gt;tr_reco == false) || \
	   ((ctr == 2) &amp;&amp; (OBJ-&gt;tr_reco == true))) \
	{ \
\
		TangoSys_OMemStream desc; \
		desc &lt;&lt; &quot;Failed to execute &quot; &lt;&lt; NAME &lt;&lt; &quot; on device &quot; &lt;&lt; OBJ-&gt;dev_name(); \
		desc &lt;&lt; ends; \
		TangoSys_OMemStream ori; \
		ori &lt;&lt; CLASS &lt;&lt; &quot;:&quot; &lt;&lt; NAME &lt;&lt; ends; \
		ApiCommExcept::re_throw_exception(E, \
						   (const char*)&quot;API_CommunicationFailed&quot;, \
                        			   desc.str(),ori.str()); \
	}</para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <itemizedlist>
                    <listitem>
                            <para>#define <link linkend="d3/d7a/apiexcept_8h_1aafa766dd97bc9baaa3e3a9ed7aebf4d2">TRANSIENT_NOT_EXIST_EXCEPT_CMD</link> if (E.minor() == omni::TRANSIENT_CallTimedout) \
	{ \
\
		bool need_reconnect = false; \
		try \
		{ \
			Device_var dev = Device::_duplicate(device); \
			dev-&gt;ping(); \
		} \
		catch(CORBA::TRANSIENT &amp;trans_ping) \
		{ \
			if (trans_ping.minor() == omni::TRANSIENT_ConnectFailed || \
                trans_ping.minor() == omni::TRANSIENT_CallTimedout || \
                (ext-&gt;has_alt_adr == true &amp;&amp; trans_ping.minor() == omni::TRANSIENT_CallTimedout)) \
			{ \
				need_reconnect = true; \
			} \
		} \
		catch(...) {} \
\
		if (need_reconnect == false) \
		{ \
			TangoSys_OMemStream desc; \
			desc &lt;&lt; &quot;Timeout (&quot; &lt;&lt; timeout &lt;&lt; &quot; mS) exceeded on device &quot; &lt;&lt; dev_name(); \
			desc &lt;&lt; &quot;, command &quot; &lt;&lt; command &lt;&lt; ends; \
			ApiCommExcept::re_throw_exception(E, \
						  (const char *)&quot;API_DeviceTimedOut&quot;, \
						  desc.str(), \
						  (const char *)&quot;Connection::command_inout()&quot;); \
		}\
	} \
\
	set_connection_state(<link linkend="d9/ddc/devapi_8h_1ad5fa52feb9025532cea9d330e28d51aa">CONNECTION_NOTOK</link>); \
	if (get_lock_ctr() != 0) \
	{ \
		set_lock_ctr(0); \
		TangoSys_OMemStream desc; \
		desc &lt;&lt; &quot;Device &quot; &lt;&lt; dev_name() &lt;&lt; &quot; has lost your lock(s) (server re-start?) while executing command &quot; &lt;&lt; command &lt;&lt; ends; \
		DeviceUnlockedExcept::re_throw_exception(E,(const char*)DEVICE_UNLOCKED_REASON, \
					desc.str(), (const char*)&quot;Connection::command_inout()&quot;); \
	} \
	ctr++; \
\
	if ((tr_reco == false) || \
	   ((ctr == 2) &amp;&amp; (tr_reco == true))) \
	{ \
		TangoSys_OMemStream desc; \
		desc &lt;&lt; &quot;Failed to execute command_inout on device &quot; &lt;&lt; dev_name(); \
		desc &lt;&lt; &quot;, command &quot; &lt;&lt; command &lt;&lt; ends; \
		ApiCommExcept::re_throw_exception(E, \
				   (const char*)&quot;API_CommunicationFailed&quot;, \
                    		   desc.str(), \
				   (const char*)&quot;Connection::command_inout()&quot;); \
	}</para>
                    </listitem>
                </itemizedlist>
            </para>
        </simplesect>
    <simplesect>
        <title>Detailed Description</title>
    <para>Definition in file /home/tango/workspace/cppTango/include/tango/client/apiexcept.h</para>
    </simplesect>
</section>
