<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>&lt;no title&gt; &#8212; Tango Core Classes Reference Documentation 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="Tango Core Classes Reference Documentation 1.0 documentation" href="../../index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><img alt="Logo" src="../../_images/logo88.jpg" /></td>
<td>Tango Core Classes Reference &nbsp;9.2.5</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><a class="reference external" href="../../index.html">Main&nbsp;Page</a></li>
<li><a class="reference external" href="../../pages.html">Related&nbsp;Pages</a></li>
<li><a class="reference external" href="../../modules.html">Modules</a></li>
<li><a class="reference external" href="../../namespaces.html">Namespaces</a></li>
<li><a class="reference external" href="../../annotated.html">Classes</a></li>
<li><a class="reference external" href="../../files.html">Files</a></li>
<li><a class="reference external" href="../../files.html">File&nbsp;List</a></li>
<li><a class="reference external" href="../../globals.html">File&nbsp;Members</a></li>
</ul>
<p>apiexcept.h</p>
<p><a class="reference external" href="../../d3/d7a/apiexcept_8h.html">Go to the documentation of this
file.</a></p>
<p>1&nbsp;//</p>
<p>2&nbsp;// apiexcept.h - include file for TANGO device api exceptions</p>
<p>3&nbsp;//</p>
<p>4&nbsp;//</p>
<p>5&nbsp;// Copyright (C) :
2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015</p>
<p>6&nbsp;// European Synchrotron Radiation Facility</p>
<p>7&nbsp;// BP 220, Grenoble 38043</p>
<p>8&nbsp;// FRANCE</p>
<p>9&nbsp;//</p>
<p>10&nbsp;// This file is part of Tango.</p>
<p>11&nbsp;//</p>
<p>12&nbsp;// Tango is free software: you can redistribute it and/or modify</p>
<p>13&nbsp;// it under the terms of the GNU Lesser General Public License as
published by</p>
<p>14&nbsp;// the Free Software Foundation, either version 3 of the License, or</p>
<p>15&nbsp;// (at your option) any later version.</p>
<p>16&nbsp;//</p>
<p>17&nbsp;// Tango is distributed in the hope that it will be useful,</p>
<p>18&nbsp;// but WITHOUT ANY WARRANTY; without even the implied warranty of</p>
<p>19&nbsp;// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</p>
<p>20&nbsp;// GNU Lesser General Public License for more details.</p>
<p>21&nbsp;//</p>
<p>22&nbsp;// You should have received a copy of the GNU Lesser General Public
License</p>
<p>23&nbsp;// along with Tango. If not, see &lt;<a class="reference external" href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>&gt;.</p>
<p>24</p>
<p>25</p>
<p>26&nbsp;#ifndef _APIEXCEPT_H</p>
<p>27&nbsp;#define _APIEXCEPT_H</p>
<p>28</p>
<p>29&nbsp;#include &lt;<a class="reference external" href="../../dc/d65/except_8h.html">tango/server/except.h</a>&gt;</p>
<p>30&nbsp;#include &lt;vector&gt;</p>
<p>31</p>
<p>32&nbsp;using namespace <a class="reference external" href="../../d8/dcc/namespacestd.html">std</a>;</p>
<p>33</p>
<p>34&nbsp;namespace <a class="reference external" href="../../de/ddf/namespaceTango.html">Tango</a> {</p>
<p>35</p>
<p>36&nbsp;/***************************************************************************</p>
<p>37&nbsp;*</p>
<p>38&nbsp;* Exception classes used for the write_attribute call</p>
<p>39&nbsp;*</p>
<p>40&nbsp;****************************************************************************/</p>
<p>41</p>
<p><a class="reference external" href="../../dc/d08/classTango_1_1NamedDevFailed.html">54</a>&nbsp;class
<a class="reference external" href="../../dc/d08/classTango_1_1NamedDevFailed.html">NamedDevFailed</a></p>
<p>55&nbsp;{</p>
<p>56&nbsp;public:</p>
<p><a class="reference external" href="../../dc/d08/classTango_1_1NamedDevFailed.html#a721334d873251d8ee91fb1f0479f281b">57</a>
string
<a class="reference external" href="../../dc/d08/classTango_1_1NamedDevFailed.html#a721334d873251d8ee91fb1f0479f281b">name</a>;</p>
<p><a class="reference external" href="../../dc/d08/classTango_1_1NamedDevFailed.html#a74da251e8cc904dddd1f037fb12d0288">58</a>
long
<a class="reference external" href="../../dc/d08/classTango_1_1NamedDevFailed.html#a74da251e8cc904dddd1f037fb12d0288">idx_in_call</a>;</p>
<p><a class="reference external" href="../../dc/d08/classTango_1_1NamedDevFailed.html#ab24a8e7c1a1a7b20e6361e85d5d4c20a">59</a>
DevErrorList
<a class="reference external" href="../../dc/d08/classTango_1_1NamedDevFailed.html#ab24a8e7c1a1a7b20e6361e85d5d4c20a">err_stack</a>;</p>
<p>60</p>
<p>62</p>
<p>63
<a class="reference external" href="../../dc/d08/classTango_1_1NamedDevFailed.html">NamedDevFailed</a>(const
DevErrorList &amp;err,const string &amp;na,long
idx):name(na),idx_in_call(idx),err_stack(err) {}</p>
<p>64
<a class="reference external" href="../../dc/d08/classTango_1_1NamedDevFailed.html">NamedDevFailed</a>();</p>
<p>65&nbsp;};</p>
<p>66</p>
<p><a class="reference external" href="../../d8/d55/classTango_1_1NamedDevFailedList.html">79</a>&nbsp;class
<a class="reference external" href="../../d8/d55/classTango_1_1NamedDevFailedList.html">NamedDevFailedList</a>:
public Tango::DevFailed</p>
<p>80&nbsp;{</p>
<p>81&nbsp;public:</p>
<p><a class="reference external" href="../../d8/d55/classTango_1_1NamedDevFailedList.html#ab158860b2498a2ac2c2c0b019d04108f">89</a>
size_t
<a class="reference external" href="../../d8/d55/classTango_1_1NamedDevFailedList.html#ab158860b2498a2ac2c2c0b019d04108f">get_faulty_attr_nb</a>()
{return err_list.size();}</p>
<p><a class="reference external" href="../../d8/d55/classTango_1_1NamedDevFailedList.html#a3956dbf7ffa91df81efda72c4a1f6ab2">97</a>
bool
<a class="reference external" href="../../d8/d55/classTango_1_1NamedDevFailedList.html#a3956dbf7ffa91df81efda72c4a1f6ab2">call_failed</a>()
{if ((err_list.empty()==true) &amp;&amp; (errors.length()!=0))return true;else
return false;}</p>
<p>98</p>
<p><a class="reference external" href="../../d8/d55/classTango_1_1NamedDevFailedList.html#a6223048f31f50ac1f6eaa9b6eb625236">99</a>
vector&lt;NamedDevFailed&gt;
<a class="reference external" href="../../d8/d55/classTango_1_1NamedDevFailedList.html#a6223048f31f50ac1f6eaa9b6eb625236">err_list</a>;</p>
<p>100</p>
<p>102</p>
<p>103
<a class="reference external" href="../../d8/d55/classTango_1_1NamedDevFailedList.html">NamedDevFailedList</a>(const
Tango::MultiDevFailed &amp;,string,const char *,const char *);</p>
<p>104
<a class="reference external" href="../../d8/d55/classTango_1_1NamedDevFailedList.html">NamedDevFailedList</a>()
{};</p>
<p>105&nbsp;};</p>
<p>106</p>
<p>107</p>
<p>108&nbsp;/****************************************************************************</p>
<p>109&nbsp;*</p>
<p>110&nbsp;* Macro to define API specific exception and their methods</p>
<p>111&nbsp;*</p>
<p>112&nbsp;*****************************************************************************/</p>
<p>113</p>
<p><a class="reference external" href="../../d3/d7a/apiexcept_8h.html#afd452ad0dbb5bb9da19c6229068b0aac">114</a>&nbsp;#define
MAKE_EXCEPT(E,I) \</p>
<p>115&nbsp;class E: public Tango::DevFailed \</p>
<p>116&nbsp;{ \</p>
<p>117&nbsp;public: \</p>
<p>118&nbsp; E(const DevErrorList&amp; err):DevFailed(err) {} \</p>
<p>119&nbsp;}; \</p>
<p>120&nbsp;class I \</p>
<p>121&nbsp;{ \</p>
<p>122&nbsp;public: \</p>
<p>123&nbsp; static inline void throw_exception(const char *reason,const
string &amp;desc,const char *origin, \</p>
<p>124&nbsp; Tango::ErrSeverity sever = Tango::ERR) \</p>
<p>125&nbsp; {\</p>
<p>126&nbsp; Tango::DevErrorList errors(1);\</p>
<p>127&nbsp; errors.length(1);\</p>
<p>128&nbsp; errors[0].desc = CORBA::string_dup(desc.c_str()); \</p>
<p>129&nbsp; errors[0].severity = sever; \</p>
<p>130&nbsp; errors[0].reason = CORBA::string_dup(reason);\</p>
<p>131&nbsp; errors[0].origin = CORBA::string_dup(origin);\</p>
<p>132&nbsp; throw Tango::E(errors);\</p>
<p>133&nbsp; }\</p>
<p>134&nbsp;\</p>
<p>135&nbsp; static inline void throw_exception(const char *reason,char
*desc,const char *origin,\</p>
<p>136&nbsp; Tango::ErrSeverity sever = Tango::ERR)\</p>
<p>137&nbsp; {\</p>
<p>138&nbsp; Tango::DevErrorList errors(1);\</p>
<p>139&nbsp; errors.length(1);\</p>
<p>140&nbsp; errors[0].desc = CORBA::string_dup(desc);\</p>
<p>141&nbsp; errors[0].severity = sever;\</p>
<p>142&nbsp; errors[0].reason = CORBA::string_dup(reason);\</p>
<p>143&nbsp; errors[0].origin = CORBA::string_dup(origin);\</p>
<p>144&nbsp; delete[] desc;\</p>
<p>145&nbsp; throw Tango::E(errors);\</p>
<p>146&nbsp; }\</p>
<p>147&nbsp;\</p>
<p>148&nbsp; static inline void throw_exception(const char *reason,const char
*desc,const char *origin,\</p>
<p>149&nbsp; Tango::ErrSeverity sever = Tango::ERR)\</p>
<p>150&nbsp; {\</p>
<p>151&nbsp; Tango::DevErrorList errors(1);\</p>
<p>152&nbsp; errors.length(1);\</p>
<p>153&nbsp; errors[0].desc = CORBA::string_dup(desc);\</p>
<p>154&nbsp; errors[0].severity = sever;\</p>
<p>155&nbsp; errors[0].reason = CORBA::string_dup(reason);\</p>
<p>156&nbsp; errors[0].origin = CORBA::string_dup(origin);\</p>
<p>157&nbsp; throw Tango::E(errors);\</p>
<p>158&nbsp; }\</p>
<p>159&nbsp;\</p>
<p>160&nbsp; static inline void re_throw_exception(CORBA::SystemException
&amp;cex,\</p>
<p>161&nbsp; const string &amp;reason,const string &amp;desc,\</p>
<p>162&nbsp; const char *origin,\</p>
<p>163&nbsp; Tango::ErrSeverity sever = Tango::ERR)\</p>
<p>164&nbsp; {\</p>
<p>165&nbsp; Tango::DevErrorList errors(2);\</p>
<p>166&nbsp; errors.length(2);\</p>
<p>167&nbsp; Tango::Except::the_mutex.lock(); \</p>
<p>168&nbsp; char *tmp = Tango::Except::print_CORBA_SystemException(&amp;cex);\</p>
<p>169&nbsp; errors[0].desc = CORBA::string_dup(tmp);\</p>
<p>170&nbsp; Tango::Except::the_mutex.unlock(); \</p>
<p>171&nbsp; errors[0].severity = sever;\</p>
<p>172&nbsp; errors[0].reason = CORBA::string_dup(&#8220;API_CorbaException&#8221;);\</p>
<p>173&nbsp; errors[0].origin = CORBA::string_dup(origin);\</p>
<p>174&nbsp; errors[1].desc = CORBA::string_dup(desc.c_str());\</p>
<p>175&nbsp; errors[1].severity = sever;\</p>
<p>176&nbsp; errors[1].reason = CORBA::string_dup(reason.c_str());\</p>
<p>177&nbsp; errors[1].origin = CORBA::string_dup(origin);\</p>
<p>178&nbsp; throw Tango::E(errors);\</p>
<p>179&nbsp; }\</p>
<p>180&nbsp;\</p>
<p>181&nbsp; static inline void re_throw_exception(CORBA::SystemException
&amp;cex,\</p>
<p>182&nbsp; char *reason,char *desc,\</p>
<p>183&nbsp; const char *origin,\</p>
<p>184&nbsp; Tango::ErrSeverity sever = Tango::ERR)\</p>
<p>185&nbsp; {\</p>
<p>186&nbsp; Tango::DevErrorList errors(2);\</p>
<p>187&nbsp; errors.length(2);\</p>
<p>188&nbsp; Tango::Except::the_mutex.lock(); \</p>
<p>189&nbsp; char *tmp = Tango::Except::print_CORBA_SystemException(&amp;cex);\</p>
<p>190&nbsp; errors[0].desc = CORBA::string_dup(tmp);\</p>
<p>191&nbsp; Tango::Except::the_mutex.unlock(); \</p>
<p>192&nbsp; errors[0].severity = sever;\</p>
<p>193&nbsp; errors[0].reason = CORBA::string_dup(&#8220;API_CorbaException&#8221;);\</p>
<p>194&nbsp; errors[0].origin = CORBA::string_dup(origin);\</p>
<p>195&nbsp; errors[1].desc = CORBA::string_dup(desc);\</p>
<p>196&nbsp; errors[1].severity = sever;\</p>
<p>197&nbsp; errors[1].reason = CORBA::string_dup(reason);\</p>
<p>198&nbsp; errors[1].origin = CORBA::string_dup(origin);\</p>
<p>199&nbsp; delete[] desc;\</p>
<p>200&nbsp; delete[] reason;\</p>
<p>201&nbsp; throw Tango::E(errors);\</p>
<p>202&nbsp; }\</p>
<p>203&nbsp; static inline void re_throw_exception(CORBA::SystemException
&amp;cex,\</p>
<p>204&nbsp; const char *reason,const string &amp;desc,\</p>
<p>205&nbsp; const char *origin,\</p>
<p>206&nbsp; Tango::ErrSeverity sever = Tango::ERR)\</p>
<p>207&nbsp; {\</p>
<p>208&nbsp; Tango::DevErrorList errors(2);\</p>
<p>209&nbsp; errors.length(2);\</p>
<p>210&nbsp; Tango::Except::the_mutex.lock(); \</p>
<p>211&nbsp; char *tmp = Tango::Except::print_CORBA_SystemException(&amp;cex);\</p>
<p>212&nbsp; errors[0].desc = CORBA::string_dup(tmp);\</p>
<p>213&nbsp; Tango::Except::the_mutex.unlock(); \</p>
<p>214&nbsp; errors[0].severity = sever;\</p>
<p>215&nbsp; errors[0].reason = CORBA::string_dup(&#8220;API_CorbaException&#8221;);\</p>
<p>216&nbsp; errors[0].origin = CORBA::string_dup(origin);\</p>
<p>217&nbsp; errors[1].desc = CORBA::string_dup(desc.c_str());\</p>
<p>218&nbsp; errors[1].severity = sever;\</p>
<p>219&nbsp; errors[1].reason = CORBA::string_dup(reason);\</p>
<p>220&nbsp; errors[1].origin = CORBA::string_dup(origin);\</p>
<p>221&nbsp; throw Tango::E(errors);\</p>
<p>222&nbsp; }\</p>
<p>223&nbsp; static inline void re_throw_exception(CORBA::SystemException
&amp;cex,\</p>
<p>224&nbsp; const char *reason,const string &amp;desc,\</p>
<p>225&nbsp; const string &amp;origin,\</p>
<p>226&nbsp; Tango::ErrSeverity sever = Tango::ERR)\</p>
<p>227&nbsp; {\</p>
<p>228&nbsp; Tango::DevErrorList errors(2);\</p>
<p>229&nbsp; errors.length(2);\</p>
<p>230&nbsp; Tango::Except::the_mutex.lock(); \</p>
<p>231&nbsp; char *tmp = Tango::Except::print_CORBA_SystemException(&amp;cex);\</p>
<p>232&nbsp; errors[0].desc = CORBA::string_dup(tmp);\</p>
<p>233&nbsp; Tango::Except::the_mutex.unlock(); \</p>
<p>234&nbsp; errors[0].severity = sever;\</p>
<p>235&nbsp; errors[0].reason = CORBA::string_dup(&#8220;API_CorbaException&#8221;);\</p>
<p>236&nbsp; errors[0].origin = CORBA::string_dup(origin.c_str());\</p>
<p>237&nbsp; errors[1].desc = CORBA::string_dup(desc.c_str());\</p>
<p>238&nbsp; errors[1].severity = sever;\</p>
<p>239&nbsp; errors[1].reason = CORBA::string_dup(reason);\</p>
<p>240&nbsp; errors[1].origin = CORBA::string_dup(origin.c_str());\</p>
<p>241&nbsp; throw Tango::E(errors);\</p>
<p>242&nbsp; }\</p>
<p>243&nbsp;\</p>
<p>244&nbsp; static inline void re_throw_exception(CORBA::SystemException
&amp;cex,\</p>
<p>245&nbsp; const char *reason,char *desc,\</p>
<p>246&nbsp; const char *origin,\</p>
<p>247&nbsp; Tango::ErrSeverity sever = Tango::ERR)\</p>
<p>248&nbsp; {\</p>
<p>249&nbsp; Tango::DevErrorList errors(2);\</p>
<p>250&nbsp; errors.length(2);\</p>
<p>251&nbsp; Tango::Except::the_mutex.lock(); \</p>
<p>252&nbsp; char *tmp = Tango::Except::print_CORBA_SystemException(&amp;cex);\</p>
<p>253&nbsp; errors[0].desc = CORBA::string_dup(tmp);\</p>
<p>254&nbsp; Tango::Except::the_mutex.unlock(); \</p>
<p>255&nbsp; errors[0].severity = sever;\</p>
<p>256&nbsp; errors[0].reason = CORBA::string_dup(&#8220;API_CorbaException&#8221;);\</p>
<p>257&nbsp; errors[0].origin = CORBA::string_dup(origin);\</p>
<p>258&nbsp; errors[1].desc = CORBA::string_dup(desc);\</p>
<p>259&nbsp; errors[1].severity = sever;\</p>
<p>260&nbsp; errors[1].reason = CORBA::string_dup(reason);\</p>
<p>261&nbsp; errors[1].origin = CORBA::string_dup(origin);\</p>
<p>262&nbsp; delete[] desc;\</p>
<p>263&nbsp; throw Tango::E(errors);\</p>
<p>264&nbsp; }\</p>
<p>265&nbsp;\</p>
<p>266&nbsp; static inline void re_throw_exception(Tango::E &amp;ex,\</p>
<p>267&nbsp; const char *reason,char *desc,\</p>
<p>268&nbsp; const char *origin,\</p>
<p>269&nbsp; Tango::ErrSeverity sever = Tango::ERR)\</p>
<p>270&nbsp; {\</p>
<p>271&nbsp; long nb_err = ex.errors.length();\</p>
<p>272&nbsp; ex.errors.length(nb_err + 1);\</p>
<p>273&nbsp; ex.errors[nb_err].severity = sever;\</p>
<p>274&nbsp; ex.errors[nb_err].desc = CORBA::string_dup(desc);\</p>
<p>275&nbsp; delete[] desc;\</p>
<p>276&nbsp; ex.errors[nb_err].origin = CORBA::string_dup(origin);\</p>
<p>277&nbsp; ex.errors[nb_err].reason = CORBA::string_dup(reason);\</p>
<p>278&nbsp; throw ex;\</p>
<p>279&nbsp; }\</p>
<p>280&nbsp;\</p>
<p>281&nbsp; static inline void re_throw_exception(Tango::E &amp;ex,\</p>
<p>282&nbsp; const char *reason,const string &amp;desc,\</p>
<p>283&nbsp; const char *origin,\</p>
<p>284&nbsp; Tango::ErrSeverity sever = Tango::ERR)\</p>
<p>285&nbsp; {\</p>
<p>286&nbsp; long nb_err = ex.errors.length();\</p>
<p>287&nbsp; ex.errors.length(nb_err + 1);\</p>
<p>288&nbsp; ex.errors[nb_err].severity = sever;\</p>
<p>289&nbsp; ex.errors[nb_err].desc = CORBA::string_dup(desc.c_str());\</p>
<p>290&nbsp; ex.errors[nb_err].origin = CORBA::string_dup(origin);\</p>
<p>291&nbsp; ex.errors[nb_err].reason = CORBA::string_dup(reason);\</p>
<p>292&nbsp; throw ex;\</p>
<p>293&nbsp; }\</p>
<p>294&nbsp; static inline void re_throw_exception(Tango::DevFailed &amp;ex,\</p>
<p>295&nbsp; const char *reason,char *desc,\</p>
<p>296&nbsp; const char *origin,\</p>
<p>297&nbsp; Tango::ErrSeverity sever = Tango::ERR)\</p>
<p>298&nbsp; {\</p>
<p>299&nbsp; long nb_err = ex.errors.length();\</p>
<p>300&nbsp; ex.errors.length(nb_err + 1);\</p>
<p>301&nbsp; ex.errors[nb_err].severity = sever;\</p>
<p>302&nbsp; ex.errors[nb_err].desc = CORBA::string_dup(desc);\</p>
<p>303&nbsp; delete[] desc;\</p>
<p>304&nbsp; ex.errors[nb_err].origin = CORBA::string_dup(origin);\</p>
<p>305&nbsp; ex.errors[nb_err].reason = CORBA::string_dup(reason);\</p>
<p>306&nbsp; throw ex;\</p>
<p>307&nbsp; }\</p>
<p>308&nbsp;\</p>
<p>309&nbsp; static inline void re_throw_exception(Tango::DevFailed &amp;ex,\</p>
<p>310&nbsp; const char *reason,const string &amp;desc,\</p>
<p>311&nbsp; const char *origin,\</p>
<p>312&nbsp; Tango::ErrSeverity sever = Tango::ERR)\</p>
<p>313&nbsp; {\</p>
<p>314&nbsp; long nb_err = ex.errors.length();\</p>
<p>315&nbsp; ex.errors.length(nb_err + 1);\</p>
<p>316&nbsp; ex.errors[nb_err].severity = sever;\</p>
<p>317&nbsp; ex.errors[nb_err].desc = CORBA::string_dup(desc.c_str());\</p>
<p>318&nbsp; ex.errors[nb_err].origin = CORBA::string_dup(origin);\</p>
<p>319&nbsp; ex.errors[nb_err].reason = CORBA::string_dup(reason);\</p>
<p>320&nbsp; throw ex;\</p>
<p>321&nbsp; }\</p>
<p>322&nbsp; static inline void re_throw_exception(Tango::DevFailed &amp;ex,\</p>
<p>323&nbsp; const char *reason,const char *desc,\</p>
<p>324&nbsp; const char *origin,\</p>
<p>325&nbsp; Tango::ErrSeverity sever = Tango::ERR)\</p>
<p>326&nbsp; {\</p>
<p>327&nbsp; long nb_err = ex.errors.length();\</p>
<p>328&nbsp; ex.errors.length(nb_err + 1);\</p>
<p>329&nbsp; ex.errors[nb_err].severity = sever;\</p>
<p>330&nbsp; ex.errors[nb_err].desc = CORBA::string_dup(desc);\</p>
<p>331&nbsp; ex.errors[nb_err].origin = CORBA::string_dup(origin);\</p>
<p>332&nbsp; ex.errors[nb_err].reason = CORBA::string_dup(reason);\</p>
<p>333&nbsp; throw ex;\</p>
<p>334&nbsp; }\</p>
<p>335&nbsp;\</p>
<p>336&nbsp; static inline void re_throw_exception(char
*CORBA_error_desc,\</p>
<p>337&nbsp; const char *reason,char *desc,\</p>
<p>338&nbsp; const char *origin,\</p>
<p>339&nbsp; Tango::ErrSeverity sever = Tango::ERR)\</p>
<p>340&nbsp; {\</p>
<p>341&nbsp; Tango::DevErrorList errors(2);\</p>
<p>342&nbsp; errors.length(2);\</p>
<p>343&nbsp; errors[0].desc = CORBA::string_dup(CORBA_error_desc);\</p>
<p>344&nbsp; errors[0].severity = sever;\</p>
<p>345&nbsp; errors[0].reason = CORBA::string_dup(&#8220;API_CorbaException&#8221;);\</p>
<p>346&nbsp; errors[0].origin = CORBA::string_dup(origin);\</p>
<p>347&nbsp; errors[1].desc = CORBA::string_dup(desc);\</p>
<p>348&nbsp; errors[1].severity = sever;\</p>
<p>349&nbsp; errors[1].reason = CORBA::string_dup(reason);\</p>
<p>350&nbsp; errors[1].origin = CORBA::string_dup(origin);\</p>
<p>351&nbsp; delete[] desc;\</p>
<p>352&nbsp; throw Tango::E(errors);\</p>
<p>353&nbsp; }\</p>
<p>354&nbsp;\</p>
<p>355&nbsp; static inline void re_throw_exception(char
*CORBA_error_desc,\</p>
<p>356&nbsp; const char *reason,const string &amp;desc,\</p>
<p>357&nbsp; const char *origin,\</p>
<p>358&nbsp; Tango::ErrSeverity sever = Tango::ERR)\</p>
<p>359&nbsp; {\</p>
<p>360&nbsp; Tango::DevErrorList errors(2);\</p>
<p>361&nbsp; errors.length(2);\</p>
<p>362&nbsp; errors[0].desc = CORBA::string_dup(CORBA_error_desc);\</p>
<p>363&nbsp; errors[0].severity = sever;\</p>
<p>364&nbsp; errors[0].reason = CORBA::string_dup(&#8220;API_CorbaException&#8221;);\</p>
<p>365&nbsp; errors[0].origin = CORBA::string_dup(origin);\</p>
<p>366&nbsp; errors[1].desc = CORBA::string_dup(desc.c_str());\</p>
<p>367&nbsp; errors[1].severity = sever;\</p>
<p>368&nbsp; errors[1].reason = CORBA::string_dup(reason);\</p>
<p>369&nbsp; errors[1].origin = CORBA::string_dup(origin);\</p>
<p>370&nbsp; throw Tango::E(errors);\</p>
<p>371&nbsp; }\</p>
<p>372&nbsp;};</p>
<p>373</p>
<p>374&nbsp;<a class="reference external" href="../../d3/d7a/apiexcept_8h.html#afd452ad0dbb5bb9da19c6229068b0aac">MAKE_EXCEPT</a>(ConnectionFailed,ApiConnExcept)</p>
<p>375&nbsp;<a class="reference external" href="../../d3/d7a/apiexcept_8h.html#afd452ad0dbb5bb9da19c6229068b0aac">MAKE_EXCEPT</a>(CommunicationFailed,ApiCommExcept)</p>
<p>376&nbsp;<a class="reference external" href="../../d3/d7a/apiexcept_8h.html#afd452ad0dbb5bb9da19c6229068b0aac">MAKE_EXCEPT</a>(WrongNameSyntax,ApiWrongNameExcept)</p>
<p>377&nbsp;<a class="reference external" href="../../d3/d7a/apiexcept_8h.html#afd452ad0dbb5bb9da19c6229068b0aac">MAKE_EXCEPT</a>(NonDbDevice,ApiNonDbExcept)</p>
<p>378&nbsp;<a class="reference external" href="../../d3/d7a/apiexcept_8h.html#afd452ad0dbb5bb9da19c6229068b0aac">MAKE_EXCEPT</a>(WrongData,ApiDataExcept)</p>
<p>379&nbsp;<a class="reference external" href="../../d3/d7a/apiexcept_8h.html#afd452ad0dbb5bb9da19c6229068b0aac">MAKE_EXCEPT</a>(NonSupportedFeature,ApiNonSuppExcept)</p>
<p>380&nbsp;<a class="reference external" href="../../d3/d7a/apiexcept_8h.html#afd452ad0dbb5bb9da19c6229068b0aac">MAKE_EXCEPT</a>(AsynCall,ApiAsynExcept)</p>
<p>381&nbsp;<a class="reference external" href="../../d3/d7a/apiexcept_8h.html#afd452ad0dbb5bb9da19c6229068b0aac">MAKE_EXCEPT</a>(AsynReplyNotArrived,ApiAsynNotThereExcept)</p>
<p>382&nbsp;<a class="reference external" href="../../d3/d7a/apiexcept_8h.html#afd452ad0dbb5bb9da19c6229068b0aac">MAKE_EXCEPT</a>(EventSystemFailed,EventSystemExcept)</p>
<p>383&nbsp;<a class="reference external" href="../../d3/d7a/apiexcept_8h.html#afd452ad0dbb5bb9da19c6229068b0aac">MAKE_EXCEPT</a>(DeviceUnlocked,DeviceUnlockedExcept)</p>
<p>384&nbsp;<a class="reference external" href="../../d3/d7a/apiexcept_8h.html#afd452ad0dbb5bb9da19c6229068b0aac">MAKE_EXCEPT</a>(NotAllowed,NotAllowedExcept)</p>
<p>385</p>
<p>386&nbsp;//</p>
<p>387&nbsp;// Define macros for the management of the Corba TRANSIENT exception</p>
<p>388&nbsp;//</p>
<p>389</p>
<p><a class="reference external" href="../../d3/d7a/apiexcept_8h.html#ac86ab2caba67e3455c7f2f74ab9c3dcc">390</a>&nbsp;#define
TRANSIENT_NOT_EXIST_EXCEPT(E,CLASS,NAME,OBJ) \</p>
<p>391&nbsp; if (E.minor() == omni::TRANSIENT_CallTimedout) \</p>
<p>392&nbsp; { \</p>
<p>393&nbsp;\</p>
<p>394&nbsp; bool need_reconnect = false; \</p>
<p>395&nbsp; omniORB::setClientConnectTimeout(NARROW_CLNT_TIMEOUT); \</p>
<p>396&nbsp; try \</p>
<p>397&nbsp; { \</p>
<p>398&nbsp; Device_var dev = Device::_duplicate(OBJ-&gt;device); \</p>
<p>399&nbsp; dev-&gt;ping(); \</p>
<p>400&nbsp; } \</p>
<p>401&nbsp; catch(CORBA::TRANSIENT &amp;trans_ping) \</p>
<p>402&nbsp; { \</p>
<p>403&nbsp; if (trans_ping.minor() == omni::TRANSIENT_ConnectFailed || \</p>
<p>404&nbsp; trans_ping.minor() == omni::TRANSIENT_CallTimedout || \</p>
<p>405&nbsp; (OBJ-&gt;ext-&gt;has_alt_adr == true &amp;&amp; trans_ping.minor() ==
omni::TRANSIENT_CallTimedout)) \</p>
<p>406&nbsp; { \</p>
<p>407&nbsp; need_reconnect = true; \</p>
<p>408&nbsp; } \</p>
<p>409&nbsp; } \</p>
<p>410&nbsp; catch(...) {} \</p>
<p>411&nbsp; omniORB::setClientConnectTimeout(0); \</p>
<p>412&nbsp;\</p>
<p>413&nbsp; if (need_reconnect == false) \</p>
<p>414&nbsp; { \</p>
<p>415&nbsp; TangoSys_OMemStream desc; \</p>
<p>416&nbsp; desc &lt;&lt; &#8220;Timeout (&#8221; &lt;&lt; OBJ-&gt;timeout &lt;&lt; &#8221; mS) exceeded on device &#8221;
&lt;&lt; OBJ-&gt;dev_name(); \</p>
<p>417&nbsp; desc &lt;&lt; ends; \</p>
<p>418&nbsp; TangoSys_OMemStream ori; \</p>
<p>419&nbsp; ori &lt;&lt; CLASS &lt;&lt; &#8221;:&#8221; &lt;&lt; NAME &lt;&lt; ends; \</p>
<p>420&nbsp; ApiCommExcept::re_throw_exception(E, \</p>
<p>421&nbsp; (const char *)&#8221;API_DeviceTimedOut&#8221;, \</p>
<p>422&nbsp; desc.str(), ori.str());\</p>
<p>423&nbsp; }\</p>
<p>424&nbsp; } \</p>
<p>425&nbsp;\</p>
<p>426&nbsp; OBJ-&gt;set_connection_state(CONNECTION_NOTOK); \</p>
<p>427&nbsp; ctr++; \</p>
<p>428&nbsp;\</p>
<p>429&nbsp; if ((OBJ-&gt;tr_reco == false) || \</p>
<p>430&nbsp; ((ctr == 2) &amp;&amp; (OBJ-&gt;tr_reco == true))) \</p>
<p>431&nbsp; { \</p>
<p>432&nbsp;\</p>
<p>433&nbsp; TangoSys_OMemStream desc; \</p>
<p>434&nbsp; desc &lt;&lt; &#8220;Failed to execute &#8221; &lt;&lt; NAME &lt;&lt; &#8221; on device &#8221; &lt;&lt;
OBJ-&gt;dev_name(); \</p>
<p>435&nbsp; desc &lt;&lt; ends; \</p>
<p>436&nbsp; TangoSys_OMemStream ori; \</p>
<p>437&nbsp; ori &lt;&lt; CLASS &lt;&lt; &#8221;:&#8221; &lt;&lt; NAME &lt;&lt; ends; \</p>
<p>438&nbsp; ApiCommExcept::re_throw_exception(E, \</p>
<p>439&nbsp; (const char*)&#8221;API_CommunicationFailed&#8221;, \</p>
<p>440&nbsp; desc.str(),ori.str()); \</p>
<p>441&nbsp; }</p>
<p>442</p>
<p>443</p>
<p><a class="reference external" href="../../d3/d7a/apiexcept_8h.html#aafa766dd97bc9baaa3e3a9ed7aebf4d2">444</a>&nbsp;#define
TRANSIENT_NOT_EXIST_EXCEPT_CMD(E) \</p>
<p>445&nbsp; if (E.minor() == omni::TRANSIENT_CallTimedout) \</p>
<p>446&nbsp; { \</p>
<p>447&nbsp;\</p>
<p>448&nbsp; bool need_reconnect = false; \</p>
<p>449&nbsp; try \</p>
<p>450&nbsp; { \</p>
<p>451&nbsp; Device_var dev = Device::_duplicate(device); \</p>
<p>452&nbsp; dev-&gt;ping(); \</p>
<p>453&nbsp; } \</p>
<p>454&nbsp; catch(CORBA::TRANSIENT &amp;trans_ping) \</p>
<p>455&nbsp; { \</p>
<p>456&nbsp; if (trans_ping.minor() == omni::TRANSIENT_ConnectFailed || \</p>
<p>457&nbsp; trans_ping.minor() == omni::TRANSIENT_CallTimedout || \</p>
<p>458&nbsp; (ext-&gt;has_alt_adr == true &amp;&amp; trans_ping.minor() ==
omni::TRANSIENT_CallTimedout)) \</p>
<p>459&nbsp; { \</p>
<p>460&nbsp; need_reconnect = true; \</p>
<p>461&nbsp; } \</p>
<p>462&nbsp; } \</p>
<p>463&nbsp; catch(...) {} \</p>
<p>464&nbsp;\</p>
<p>465&nbsp; if (need_reconnect == false) \</p>
<p>466&nbsp; { \</p>
<p>467&nbsp; TangoSys_OMemStream desc; \</p>
<p>468&nbsp; desc &lt;&lt; &#8220;Timeout (&#8221; &lt;&lt; timeout &lt;&lt; &#8221; mS) exceeded on device &#8221; &lt;&lt;
dev_name(); \</p>
<p>469&nbsp; desc &lt;&lt; &#8221;, command &#8221; &lt;&lt; command &lt;&lt; ends; \</p>
<p>470&nbsp; ApiCommExcept::re_throw_exception(E, \</p>
<p>471&nbsp; (const char *)&#8221;API_DeviceTimedOut&#8221;, \</p>
<p>472&nbsp; desc.str(), \</p>
<p>473&nbsp; (const char *)&#8221;Connection::command_inout()&#8221;); \</p>
<p>474&nbsp; }\</p>
<p>475&nbsp; } \</p>
<p>476&nbsp;\</p>
<p>477&nbsp; set_connection_state(CONNECTION_NOTOK); \</p>
<p>478&nbsp; if (get_lock_ctr() != 0) \</p>
<p>479&nbsp; { \</p>
<p>480&nbsp; set_lock_ctr(0); \</p>
<p>481&nbsp; TangoSys_OMemStream desc; \</p>
<p>482&nbsp; desc &lt;&lt; &#8220;Device &#8221; &lt;&lt; dev_name() &lt;&lt; &#8221; has lost your lock(s) (server
re-start?) while executing command &#8221; &lt;&lt; command &lt;&lt; ends; \</p>
<p>483&nbsp; DeviceUnlockedExcept::re_throw_exception(E,(const
char*)DEVICE_UNLOCKED_REASON, \</p>
<p>484&nbsp; desc.str(), (const char*)&#8221;Connection::command_inout()&#8221;); \</p>
<p>485&nbsp; } \</p>
<p>486&nbsp; ctr++; \</p>
<p>487&nbsp;\</p>
<p>488&nbsp; if ((tr_reco == false) || \</p>
<p>489&nbsp; ((ctr == 2) &amp;&amp; (tr_reco == true))) \</p>
<p>490&nbsp; { \</p>
<p>491&nbsp; TangoSys_OMemStream desc; \</p>
<p>492&nbsp; desc &lt;&lt; &#8220;Failed to execute command_inout on device &#8221; &lt;&lt;
dev_name(); \</p>
<p>493&nbsp; desc &lt;&lt; &#8221;, command &#8221; &lt;&lt; command &lt;&lt; ends; \</p>
<p>494&nbsp; ApiCommExcept::re_throw_exception(E, \</p>
<p>495&nbsp; (const char*)&#8221;API_CommunicationFailed&#8221;, \</p>
<p>496&nbsp; desc.str(), \</p>
<p>497&nbsp; (const char*)&#8221;Connection::command_inout()&#8221;); \</p>
<p>498&nbsp; }</p>
<p>499</p>
<p>500</p>
<p>501&nbsp;} // End of Tango namespace</p>
<p>502</p>
<p>503&nbsp;#endif /* _APIEXCEPT_H */</p>
<p><a class="reference external" href="../../dc/d65/except_8h.html">except.h</a></p>
<p><a class="reference external" href="../../d8/dcc/namespacestd.html">std</a></p>
<p><strong>Definition:</strong> LoggerStream.hh:178</p>
<p><a class="reference external" href="../../d8/d55/classTango_1_1NamedDevFailedList.html">Tango::NamedDevFailedList</a></p>
<p>An exception class.</p>
<p><strong>Definition:</strong> apiexcept.h:79</p>
<p><a class="reference external" href="../../de/ddf/namespaceTango.html">Tango</a></p>
<hr class="docutils" />
<p><strong>Definition:</strong> device.h:50</p>
<p><a class="reference external" href="../../d8/d55/classTango_1_1NamedDevFailedList.html#ab158860b2498a2ac2c2c0b019d04108f">Tango::NamedDevFailedList::get_faulty_attr_nb</a></p>
<p>size_t get_faulty_attr_nb()</p>
<p>Get faulty attribute number.</p>
<p><strong>Definition:</strong> apiexcept.h:89</p>
<p><a class="reference external" href="../../dc/d08/classTango_1_1NamedDevFailed.html#a721334d873251d8ee91fb1f0479f281b">Tango::NamedDevFailed::name</a></p>
<p>string name</p>
<p>The name of the attribute which fails.</p>
<p><strong>Definition:</strong> apiexcept.h:57</p>
<p><a class="reference external" href="../../dc/d08/classTango_1_1NamedDevFailed.html#ab24a8e7c1a1a7b20e6361e85d5d4c20a">Tango::NamedDevFailed::err_stack</a></p>
<p>DevErrorList err_stack</p>
<p>The error stack.</p>
<p><strong>Definition:</strong> apiexcept.h:59</p>
<p><a class="reference external" href="../../d8/d55/classTango_1_1NamedDevFailedList.html#a6223048f31f50ac1f6eaa9b6eb625236">Tango::NamedDevFailedList::err_list</a></p>
<p>vector&lt; NamedDevFailed &gt; err_list</p>
<p>There is one element in this vector for each attribute which failed
during its writing.</p>
<p><strong>Definition:</strong> apiexcept.h:99</p>
<p><a class="reference external" href="../../dc/d08/classTango_1_1NamedDevFailed.html#a74da251e8cc904dddd1f037fb12d0288">Tango::NamedDevFailed::idx_in_call</a></p>
<p>long idx_in_call</p>
<p>Index in the write_attributes method parameter vector of the attribute
which failed.</p>
<p><strong>Definition:</strong> apiexcept.h:58</p>
<p><a class="reference external" href="../../d3/d7a/apiexcept_8h.html#afd452ad0dbb5bb9da19c6229068b0aac">MAKE_EXCEPT</a></p>
<p>#define MAKE_EXCEPT(E, I)</p>
<p><strong>Definition:</strong> apiexcept.h:114</p>
<p><a class="reference external" href="../../dc/d08/classTango_1_1NamedDevFailed.html">Tango::NamedDevFailed</a></p>
<p>An exception class.</p>
<p><strong>Definition:</strong> apiexcept.h:54</p>
<p><a class="reference external" href="../../d8/d55/classTango_1_1NamedDevFailedList.html#a3956dbf7ffa91df81efda72c4a1f6ab2">Tango::NamedDevFailedList::call_failed</a></p>
<p>bool call_failed()</p>
<p>Check if the call failed.</p>
<p><strong>Definition:</strong> apiexcept.h:97</p>
<ul class="simple">
<li><a class="reference external" href="../../dir_93bc669b4520ad36068f344e109b7d17.html">include</a></li>
<li><a class="reference external" href="../../dir_8ff48e8f3ef80891a9957ae5e9583431.html">tango</a></li>
<li><a class="reference external" href="../../dir_aabb28ef55dfa122001606060d01cd05.html">client</a></li>
<li><a class="reference external" href="../../d3/d7a/apiexcept_8h.html">apiexcept.h</a></li>
<li>Generated on Fri Oct 7 2016 11:11:15 for Tango Core Classes Reference
by <a class="reference external" href="http://www.doxygen.org/index.html"><img alt="doxygen" src="../../_images/doxygen88.png" /></a> 1.8.8</li>
</ul>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/d3/d7a/apiexcept_8h_source.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, 3Controls.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.8</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../../_sources/d3/d7a/apiexcept_8h_source.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>